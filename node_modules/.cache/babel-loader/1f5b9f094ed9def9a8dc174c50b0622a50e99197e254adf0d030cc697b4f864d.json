{"ast":null,"code":"export const saveToFile = mindMap => {\n  const jsonString = JSON.stringify(mindMap, null, 2);\n  const blob = new Blob([jsonString], {\n    type: 'application/json'\n  });\n  const url = URL.createObjectURL(blob);\n  const link = document.createElement('a');\n  link.href = url;\n  link.download = `${mindMap.rootTopic.title || 'mindmap'}_${new Date().toISOString().slice(0, 10)}.json`;\n  document.body.appendChild(link);\n  link.click();\n  document.body.removeChild(link);\n  URL.revokeObjectURL(url);\n};\nexport const loadFromFile = () => {\n  return new Promise((resolve, reject) => {\n    const input = document.createElement('input');\n    input.type = 'file';\n    input.accept = '.json';\n    input.onchange = e => {\n      var _target$files;\n      const target = e.target;\n      const file = (_target$files = target.files) === null || _target$files === void 0 ? void 0 : _target$files[0];\n      if (!file) {\n        reject('未选择文件');\n        return;\n      }\n      const reader = new FileReader();\n      reader.onload = event => {\n        try {\n          var _event$target;\n          const data = JSON.parse((_event$target = event.target) === null || _event$target === void 0 ? void 0 : _event$target.result);\n          resolve(data);\n        } catch (error) {\n          reject('文件格式无效');\n        }\n      };\n      reader.readAsText(file);\n    };\n    input.click();\n  });\n};","map":{"version":3,"names":["saveToFile","mindMap","jsonString","JSON","stringify","blob","Blob","type","url","URL","createObjectURL","link","document","createElement","href","download","rootTopic","title","Date","toISOString","slice","body","appendChild","click","removeChild","revokeObjectURL","loadFromFile","Promise","resolve","reject","input","accept","onchange","e","_target$files","target","file","files","reader","FileReader","onload","event","_event$target","data","parse","result","error","readAsText"],"sources":["D:/Work/SIWEI/src/utils/fileUtils.ts"],"sourcesContent":["import { MindMap } from '../types/MindMap';\r\n\r\nexport const saveToFile = (mindMap: MindMap) => {\r\n  const jsonString = JSON.stringify(mindMap, null, 2);\r\n  const blob = new Blob([jsonString], { type: 'application/json' });\r\n  const url = URL.createObjectURL(blob);\r\n\r\n  const link = document.createElement('a');\r\n  link.href = url;\r\n  link.download = `${mindMap.rootTopic.title || 'mindmap'}_${new Date().toISOString().slice(0,10)}.json`;\r\n\r\n  document.body.appendChild(link);\r\n  link.click();\r\n  document.body.removeChild(link);\r\n  URL.revokeObjectURL(url);\r\n};\r\n\r\nexport const loadFromFile = (): Promise<MindMap> => {\r\n  return new Promise((resolve, reject) => {\r\n    const input = document.createElement('input');\r\n    input.type = 'file';\r\n    input.accept = '.json';\r\n\r\n    input.onchange = (e: Event) => {\r\n      const target = e.target as HTMLInputElement;\r\n      const file = target.files?.[0];\r\n      if (!file) {\r\n        reject('未选择文件');\r\n        return;\r\n      }\r\n\r\n      const reader = new FileReader();\r\n      reader.onload = (event) => {\r\n        try {\r\n          const data = JSON.parse(event.target?.result as string);\r\n          resolve(data);\r\n        } catch (error) {\r\n          reject('文件格式无效');\r\n        }\r\n      };\r\n      reader.readAsText(file);\r\n    };\r\n\r\n    input.click();\r\n  });\r\n};"],"mappings":"AAEA,OAAO,MAAMA,UAAU,GAAIC,OAAgB,IAAK;EAC9C,MAAMC,UAAU,GAAGC,IAAI,CAACC,SAAS,CAACH,OAAO,EAAE,IAAI,EAAE,CAAC,CAAC;EACnD,MAAMI,IAAI,GAAG,IAAIC,IAAI,CAAC,CAACJ,UAAU,CAAC,EAAE;IAAEK,IAAI,EAAE;EAAmB,CAAC,CAAC;EACjE,MAAMC,GAAG,GAAGC,GAAG,CAACC,eAAe,CAACL,IAAI,CAAC;EAErC,MAAMM,IAAI,GAAGC,QAAQ,CAACC,aAAa,CAAC,GAAG,CAAC;EACxCF,IAAI,CAACG,IAAI,GAAGN,GAAG;EACfG,IAAI,CAACI,QAAQ,GAAG,GAAGd,OAAO,CAACe,SAAS,CAACC,KAAK,IAAI,SAAS,IAAI,IAAIC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CAACC,KAAK,CAAC,CAAC,EAAC,EAAE,CAAC,OAAO;EAEtGR,QAAQ,CAACS,IAAI,CAACC,WAAW,CAACX,IAAI,CAAC;EAC/BA,IAAI,CAACY,KAAK,CAAC,CAAC;EACZX,QAAQ,CAACS,IAAI,CAACG,WAAW,CAACb,IAAI,CAAC;EAC/BF,GAAG,CAACgB,eAAe,CAACjB,GAAG,CAAC;AAC1B,CAAC;AAED,OAAO,MAAMkB,YAAY,GAAGA,CAAA,KAAwB;EAClD,OAAO,IAAIC,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;IACtC,MAAMC,KAAK,GAAGlB,QAAQ,CAACC,aAAa,CAAC,OAAO,CAAC;IAC7CiB,KAAK,CAACvB,IAAI,GAAG,MAAM;IACnBuB,KAAK,CAACC,MAAM,GAAG,OAAO;IAEtBD,KAAK,CAACE,QAAQ,GAAIC,CAAQ,IAAK;MAAA,IAAAC,aAAA;MAC7B,MAAMC,MAAM,GAAGF,CAAC,CAACE,MAA0B;MAC3C,MAAMC,IAAI,IAAAF,aAAA,GAAGC,MAAM,CAACE,KAAK,cAAAH,aAAA,uBAAZA,aAAA,CAAe,CAAC,CAAC;MAC9B,IAAI,CAACE,IAAI,EAAE;QACTP,MAAM,CAAC,OAAO,CAAC;QACf;MACF;MAEA,MAAMS,MAAM,GAAG,IAAIC,UAAU,CAAC,CAAC;MAC/BD,MAAM,CAACE,MAAM,GAAIC,KAAK,IAAK;QACzB,IAAI;UAAA,IAAAC,aAAA;UACF,MAAMC,IAAI,GAAGxC,IAAI,CAACyC,KAAK,EAAAF,aAAA,GAACD,KAAK,CAACN,MAAM,cAAAO,aAAA,uBAAZA,aAAA,CAAcG,MAAgB,CAAC;UACvDjB,OAAO,CAACe,IAAI,CAAC;QACf,CAAC,CAAC,OAAOG,KAAK,EAAE;UACdjB,MAAM,CAAC,QAAQ,CAAC;QAClB;MACF,CAAC;MACDS,MAAM,CAACS,UAAU,CAACX,IAAI,CAAC;IACzB,CAAC;IAEDN,KAAK,CAACP,KAAK,CAAC,CAAC;EACf,CAAC,CAAC;AACJ,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}