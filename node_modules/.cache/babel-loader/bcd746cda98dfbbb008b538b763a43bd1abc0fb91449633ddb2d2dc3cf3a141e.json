{"ast":null,"code":"export const saveToFile = mindMap => {\n  const jsonString = JSON.stringify(mindMap, null, 2);\n  const blob = new Blob([jsonString], {\n    type: 'application/json'\n  });\n  const url = URL.createObjectURL(blob);\n  const link = document.createElement('a');\n  link.href = url;\n  link.download = `${mindMap.rootTopic.title || 'mindmap'}_${new Date().toISOString().slice(0, 10)}.json`;\n  document.body.appendChild(link);\n  link.click();\n  document.body.removeChild(link);\n  URL.revokeObjectURL(url);\n};\nexport const loadFromFile = () => {\n  return new Promise((resolve, reject) => {\n    const input = document.createElement('input');\n    input.type = 'file';\n    input.accept = '.json';\n    input.onchange = e => {\n      const file = e.target.files[0];\n      if (!file) {\n        reject('No file selected');\n        return;\n      }\n      const reader = new FileReader();\n      reader.onload = event => {\n        try {\n          var _event$target;\n          const data = JSON.parse((_event$target = event.target) === null || _event$target === void 0 ? void 0 : _event$target.result);\n          resolve(data);\n        } catch (error) {\n          reject('Invalid file format');\n        }\n      };\n      reader.readAsText(file);\n    };\n    input.click();\n  });\n};","map":{"version":3,"names":["saveToFile","mindMap","jsonString","JSON","stringify","blob","Blob","type","url","URL","createObjectURL","link","document","createElement","href","download","rootTopic","title","Date","toISOString","slice","body","appendChild","click","removeChild","revokeObjectURL","loadFromFile","Promise","resolve","reject","input","accept","onchange","e","file","target","files","reader","FileReader","onload","event","_event$target","data","parse","result","error","readAsText"],"sources":["D:/Work/SIWEI/src/utils/fileUtils.ts"],"sourcesContent":["export const saveToFile = (mindMap: any) => {\r\n  const jsonString = JSON.stringify(mindMap, null, 2);\r\n  const blob = new Blob([jsonString], { type: 'application/json' });\r\n  const url = URL.createObjectURL(blob);\r\n\r\n  const link = document.createElement('a');\r\n  link.href = url;\r\n  link.download = `${mindMap.rootTopic.title || 'mindmap'}_${new Date().toISOString().slice(0,10)}.json`;\r\n\r\n  document.body.appendChild(link);\r\n  link.click();\r\n  document.body.removeChild(link);\r\n  URL.revokeObjectURL(url);\r\n};\r\n\r\nexport const loadFromFile = (): Promise<any> => {\r\n  return new Promise((resolve, reject) => {\r\n    const input = document.createElement('input');\r\n    input.type = 'file';\r\n    input.accept = '.json';\r\n\r\n    input.onchange = (e: any) => {\r\n      const file = e.target.files[0];\r\n      if (!file) {\r\n        reject('No file selected');\r\n        return;\r\n      }\r\n\r\n      const reader = new FileReader();\r\n      reader.onload = (event) => {\r\n        try {\r\n          const data = JSON.parse(event.target?.result as string);\r\n          resolve(data);\r\n        } catch (error) {\r\n          reject('Invalid file format');\r\n        }\r\n      };\r\n      reader.readAsText(file);\r\n    };\r\n\r\n    input.click();\r\n  });\r\n};"],"mappings":"AAAA,OAAO,MAAMA,UAAU,GAAIC,OAAY,IAAK;EAC1C,MAAMC,UAAU,GAAGC,IAAI,CAACC,SAAS,CAACH,OAAO,EAAE,IAAI,EAAE,CAAC,CAAC;EACnD,MAAMI,IAAI,GAAG,IAAIC,IAAI,CAAC,CAACJ,UAAU,CAAC,EAAE;IAAEK,IAAI,EAAE;EAAmB,CAAC,CAAC;EACjE,MAAMC,GAAG,GAAGC,GAAG,CAACC,eAAe,CAACL,IAAI,CAAC;EAErC,MAAMM,IAAI,GAAGC,QAAQ,CAACC,aAAa,CAAC,GAAG,CAAC;EACxCF,IAAI,CAACG,IAAI,GAAGN,GAAG;EACfG,IAAI,CAACI,QAAQ,GAAG,GAAGd,OAAO,CAACe,SAAS,CAACC,KAAK,IAAI,SAAS,IAAI,IAAIC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CAACC,KAAK,CAAC,CAAC,EAAC,EAAE,CAAC,OAAO;EAEtGR,QAAQ,CAACS,IAAI,CAACC,WAAW,CAACX,IAAI,CAAC;EAC/BA,IAAI,CAACY,KAAK,CAAC,CAAC;EACZX,QAAQ,CAACS,IAAI,CAACG,WAAW,CAACb,IAAI,CAAC;EAC/BF,GAAG,CAACgB,eAAe,CAACjB,GAAG,CAAC;AAC1B,CAAC;AAED,OAAO,MAAMkB,YAAY,GAAGA,CAAA,KAAoB;EAC9C,OAAO,IAAIC,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;IACtC,MAAMC,KAAK,GAAGlB,QAAQ,CAACC,aAAa,CAAC,OAAO,CAAC;IAC7CiB,KAAK,CAACvB,IAAI,GAAG,MAAM;IACnBuB,KAAK,CAACC,MAAM,GAAG,OAAO;IAEtBD,KAAK,CAACE,QAAQ,GAAIC,CAAM,IAAK;MAC3B,MAAMC,IAAI,GAAGD,CAAC,CAACE,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC;MAC9B,IAAI,CAACF,IAAI,EAAE;QACTL,MAAM,CAAC,kBAAkB,CAAC;QAC1B;MACF;MAEA,MAAMQ,MAAM,GAAG,IAAIC,UAAU,CAAC,CAAC;MAC/BD,MAAM,CAACE,MAAM,GAAIC,KAAK,IAAK;QACzB,IAAI;UAAA,IAAAC,aAAA;UACF,MAAMC,IAAI,GAAGvC,IAAI,CAACwC,KAAK,EAAAF,aAAA,GAACD,KAAK,CAACL,MAAM,cAAAM,aAAA,uBAAZA,aAAA,CAAcG,MAAgB,CAAC;UACvDhB,OAAO,CAACc,IAAI,CAAC;QACf,CAAC,CAAC,OAAOG,KAAK,EAAE;UACdhB,MAAM,CAAC,qBAAqB,CAAC;QAC/B;MACF,CAAC;MACDQ,MAAM,CAACS,UAAU,CAACZ,IAAI,CAAC;IACzB,CAAC;IAEDJ,KAAK,CAACP,KAAK,CAAC,CAAC;EACf,CAAC,CAAC;AACJ,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}