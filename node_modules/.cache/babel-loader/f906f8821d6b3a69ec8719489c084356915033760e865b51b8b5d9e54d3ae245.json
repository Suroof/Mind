{"ast":null,"code":"import { ipcRenderer } from 'electron';\nexport const saveMindMap = mindMap => {\n  try {\n    const savedMaps = ipcRenderer.sendSync('load-mindmaps') || [];\n    const existingIndex = savedMaps.findIndex(map => map.id === mindMap.id);\n    if (existingIndex >= 0) {\n      savedMaps[existingIndex] = mindMap;\n    } else {\n      savedMaps.push(mindMap);\n    }\n    ipcRenderer.send('save-mindmap', savedMaps);\n    return true;\n  } catch (error) {\n    console.error('保存失败:', error);\n    return false;\n  }\n};\nexport const loadMindMaps = () => {\n  try {\n    return ipcRenderer.sendSync('load-mindmaps') || [];\n  } catch (error) {\n    console.error('加载失败:', error);\n    return [];\n  }\n};\nexport const deleteMindMap = id => {\n  try {\n    const savedMaps = JSON.parse(localStorage.getItem('mindMaps') || '[]');\n    const filteredMaps = savedMaps.filter(map => map.id !== id);\n    localStorage.setItem('mindMaps', JSON.stringify(filteredMaps));\n    return true;\n  } catch (error) {\n    console.error('删除失败:', error);\n    return false;\n  }\n};","map":{"version":3,"names":["ipcRenderer","saveMindMap","mindMap","savedMaps","sendSync","existingIndex","findIndex","map","id","push","send","error","console","loadMindMaps","deleteMindMap","JSON","parse","localStorage","getItem","filteredMaps","filter","setItem","stringify"],"sources":["D:/Work/SIWEI/src/utils/storageUtils.ts"],"sourcesContent":["import { ipcRenderer } from 'electron';\r\nimport { MindMap } from '../types/MindMap';\r\n\r\nexport const saveMindMap = (mindMap: MindMap) => {\r\n  try {\r\n    const savedMaps = ipcRenderer.sendSync('load-mindmaps') || [];\r\n    const existingIndex = savedMaps.findIndex((map: MindMap) => map.id === mindMap.id);\r\n\r\n    if (existingIndex >= 0) {\r\n      savedMaps[existingIndex] = mindMap;\r\n    } else {\r\n      savedMaps.push(mindMap);\r\n    }\r\n\r\n    ipcRenderer.send('save-mindmap', savedMaps);\r\n    return true;\r\n  } catch (error) {\r\n    console.error('保存失败:', error);\r\n    return false;\r\n  }\r\n};\r\n\r\nexport const loadMindMaps = (): MindMap[] => {\r\n  try {\r\n    return ipcRenderer.sendSync('load-mindmaps') || [];\r\n  } catch (error) {\r\n    console.error('加载失败:', error);\r\n    return [];\r\n  }\r\n};\r\n\r\nexport const deleteMindMap = (id: string): boolean => {\r\n  try {\r\n    const savedMaps = JSON.parse(localStorage.getItem('mindMaps') || '[]');\r\n    const filteredMaps = savedMaps.filter((map: MindMap) => map.id !== id);\r\n    localStorage.setItem('mindMaps', JSON.stringify(filteredMaps));\r\n    return true;\r\n  } catch (error) {\r\n    console.error('删除失败:', error);\r\n    return false;\r\n  }\r\n};"],"mappings":"AAAA,SAASA,WAAW,QAAQ,UAAU;AAGtC,OAAO,MAAMC,WAAW,GAAIC,OAAgB,IAAK;EAC/C,IAAI;IACF,MAAMC,SAAS,GAAGH,WAAW,CAACI,QAAQ,CAAC,eAAe,CAAC,IAAI,EAAE;IAC7D,MAAMC,aAAa,GAAGF,SAAS,CAACG,SAAS,CAAEC,GAAY,IAAKA,GAAG,CAACC,EAAE,KAAKN,OAAO,CAACM,EAAE,CAAC;IAElF,IAAIH,aAAa,IAAI,CAAC,EAAE;MACtBF,SAAS,CAACE,aAAa,CAAC,GAAGH,OAAO;IACpC,CAAC,MAAM;MACLC,SAAS,CAACM,IAAI,CAACP,OAAO,CAAC;IACzB;IAEAF,WAAW,CAACU,IAAI,CAAC,cAAc,EAAEP,SAAS,CAAC;IAC3C,OAAO,IAAI;EACb,CAAC,CAAC,OAAOQ,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAC,OAAO,EAAEA,KAAK,CAAC;IAC7B,OAAO,KAAK;EACd;AACF,CAAC;AAED,OAAO,MAAME,YAAY,GAAGA,CAAA,KAAiB;EAC3C,IAAI;IACF,OAAOb,WAAW,CAACI,QAAQ,CAAC,eAAe,CAAC,IAAI,EAAE;EACpD,CAAC,CAAC,OAAOO,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAC,OAAO,EAAEA,KAAK,CAAC;IAC7B,OAAO,EAAE;EACX;AACF,CAAC;AAED,OAAO,MAAMG,aAAa,GAAIN,EAAU,IAAc;EACpD,IAAI;IACF,MAAML,SAAS,GAAGY,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC,IAAI,IAAI,CAAC;IACtE,MAAMC,YAAY,GAAGhB,SAAS,CAACiB,MAAM,CAAEb,GAAY,IAAKA,GAAG,CAACC,EAAE,KAAKA,EAAE,CAAC;IACtES,YAAY,CAACI,OAAO,CAAC,UAAU,EAAEN,IAAI,CAACO,SAAS,CAACH,YAAY,CAAC,CAAC;IAC9D,OAAO,IAAI;EACb,CAAC,CAAC,OAAOR,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAC,OAAO,EAAEA,KAAK,CAAC;IAC7B,OAAO,KAAK;EACd;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}